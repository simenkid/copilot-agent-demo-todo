# Use Case 文件生成指令

## 🎯 目標
根據需求分析，自動產生專業、完整、可執行的 Use Case 文件。

## 📋 UC 文件標準格式

### 1. 基本資訊
```yaml
UC編號: UC-YYYY-NNN
標題: [動詞] + [目標對象]
版本: v1.0
建立日期: YYYY-MM-DD
最後更新: YYYY-MM-DD
作者: GitHub Copilot Agent
狀態: 草稿|審核中|已批准|已實作
優先級: 高|中|低
複雜度: 簡單|中等|複雜
```

### 2. 參與者 (Actors)
```markdown
## 主要參與者
- **[角色名稱]**：[角色描述]
  - 權限：[權限列表]
  - 目標：[使用此功能的目的]

## 次要參與者
- **[系統/服務名稱]**：[描述]
  - 互動方式：[API/事件/訊息]
```

### 3. 前置條件 (Preconditions)
```markdown
1. 系統條件
   - [ ] 系統處於正常運作狀態
   - [ ] 必要的服務都已啟動
   - [ ] 資料庫連線正常

2. 使用者條件
   - [ ] 使用者已登入系統
   - [ ] 使用者具有必要權限
   - [ ] 使用者在正確的頁面/狀態

3. 資料條件
   - [ ] 必要的基礎資料已存在
   - [ ] 資料格式符合要求
```

### 4. 後置條件 (Postconditions)
```markdown
## 成功場景
- 系統狀態：[描述成功後的系統狀態]
- 資料變更：[描述資料的變化]
- 通知發送：[描述需要發送的通知]

## 失敗場景
- 系統復原：[描述如何回復到原始狀態]
- 錯誤記錄：[描述錯誤日誌內容]
- 使用者提示：[描述錯誤訊息]
```

### 5. 主要流程 (Main Flow)
```markdown
1. **使用者動作**：[使用者執行的操作]
   - 介面元素：[按鈕/連結/表單]
   - 輸入資料：[必要的輸入欄位]

2. **系統驗證**：[系統執行的檢查]
   - 資料驗證：[驗證規則]
   - 權限檢查：[權限要求]
   - 業務規則：[業務邏輯檢查]

3. **系統處理**：[核心業務邏輯]
   ```javascript
   // 虛擬碼示例
   function processAction(input) {
     validateInput(input);
     checkPermissions(user);
     performBusinessLogic(input);
     updateDatabase(result);
     notifyRelatedSystems(result);
   }
   ```

4. **系統回應**：[返回給使用者的結果]
   - 成功訊息：[訊息內容]
   - 資料更新：[更新的介面元素]
   - 頁面跳轉：[目標頁面]
```

### 6. 替代流程 (Alternative Flows)
```markdown
## AF1：[替代流程名稱]
觸發點：在步驟 [N] 時，如果 [條件]
1. [替代步驟1]
2. [替代步驟2]
3. 返回主流程步驟 [M]

## AF2：[替代流程名稱]
觸發點：在步驟 [N] 時，如果 [條件]
1. [替代步驟1]
2. 結束用例
```

### 7. 例外流程 (Exception Flows)
```markdown
## EF1：資料驗證失敗
觸發點：步驟 2 的資料驗證
- 錯誤類型：驗證錯誤
- 處理方式：
  1. 標示錯誤欄位
  2. 顯示具體錯誤訊息
  3. 保留使用者輸入
  4. 允許使用者修正後重試

## EF2：系統錯誤
觸發點：任何系統處理步驟
- 錯誤類型：系統異常
- 處理方式：
  1. 記錄錯誤詳情
  2. 回滾交易
  3. 顯示友善錯誤訊息
  4. 提供錯誤追蹤編號
```

### 8. 業務規則 (Business Rules)
```markdown
## BR1：[規則名稱]
- 描述：[業務規則描述]
- 實作邏輯：
  ```javascript
  if (condition) {
    // 執行動作
  } else {
    // 其他處理
  }
  ```

## BR2：[規則名稱]
- 描述：[業務規則描述]
- 參數設定：
  - 最大值：[數值]
  - 最小值：[數值]
  - 允許範圍：[範圍描述]
```

### 9. 資料需求 (Data Requirements)
```javascript
// 輸入資料結構
interface InputData {
  field1: string;      // 必填，最大長度 50
  field2: number;      // 必填，範圍 1-100
  field3?: Date;       // 選填，不可為未來日期
  nested: {
    subField1: boolean;
    subField2: string[];
  };
}

// 輸出資料結構
interface OutputData {
  success: boolean;
  data?: {
    id: string;
    createdAt: Date;
    details: any;
  };
  error?: {
    code: string;
    message: string;
  };
}
```

### 10. 介面需求 (UI Requirements)
```markdown
## 頁面配置
- 標題區：[標題文字]
- 表單區：
  - 欄位1：[類型、驗證、提示]
  - 欄位2：[類型、驗證、提示]
- 操作區：
  - 主要按鈕：[文字、行為]
  - 次要按鈕：[文字、行為]

## 互動行為
- 載入狀態：[Loading 指示器]
- 錯誤提示：[錯誤訊息顯示方式]
- 成功反饋：[成功訊息和動畫]
- 鍵盤快捷鍵：[快捷鍵映射]
```

### 11. 非功能需求
```markdown
## 效能需求
- 回應時間：< 2 秒
- 並發使用者：支援 100 個同時操作
- 資料處理量：每秒 1000 筆

## 安全需求
- 身份驗證：JWT Token
- 資料加密：HTTPS 傳輸
- 輸入清理：防止 XSS/SQL 注入

## 可用性需求
- 瀏覽器支援：Chrome, Firefox, Safari, Edge
- 響應式設計：支援手機、平板、桌面
- 無障礙設計：WCAG 2.1 Level AA
```

### 12. 測試場景
```markdown
## 正向測試
| 測試編號 | 測試描述 | 預期結果 |
|---------|---------|---------|
| TC001 | 正常流程測試 | 成功完成操作 |
| TC002 | 邊界值測試 | 正確處理邊界情況 |

## 負向測試
| 測試編號 | 測試描述 | 預期結果 |
|---------|---------|---------|
| TN001 | 無效輸入測試 | 顯示驗證錯誤 |
| TN002 | 權限不足測試 | 顯示權限錯誤 |

## 整合測試
- API 整合測試
- 資料庫交易測試
- 第三方服務測試
```

## 📝 UC 文件模板

```markdown
# UC-[編號]：[用例名稱]

## 基本資訊
- **版本**：v1.0
- **日期**：YYYY-MM-DD
- **優先級**：高
- **預估工時**：[X] 人天

## 概述
[一段話描述此用例的目的和價值]

## 參與者
- **主要**：[角色]
- **次要**：[系統/服務]

## 前置條件
1. [條件1]
2. [條件2]

## 主要流程
1. [步驟1]
2. [步驟2]
3. [步驟3]

## 替代流程
### AF1：[名稱]
- 觸發：[條件]
- 步驟：[處理流程]

## 例外處理
### EF1：[錯誤類型]
- 處理：[錯誤處理方式]

## 後置條件
- **成功**：[狀態描述]
- **失敗**：[復原機制]

## 測試要點
- [ ] 正常流程
- [ ] 邊界條件
- [ ] 錯誤處理
- [ ] 效能要求

## 實作注意事項
- [技術要點1]
- [技術要點2]
```

## 🤖 自動生成策略

### 1. 從 Issue 提取資訊
```javascript
function extractFromIssue(issue) {
  return {
    title: extractTitle(issue),
    actors: identifyActors(issue),
    requirements: parseRequirements(issue),
    constraints: findConstraints(issue)
  };
}
```

### 2. 智能填充內容
- 根據功能類型選擇適當的流程模板
- 自動識別常見的例外情況
- 推斷合理的業務規則
- 建議適當的測試場景

### 3. 品質檢查
- 完整性檢查：所有必要章節都已填寫
- 一致性檢查：術語和描述保持一致
- 可行性檢查：技術方案可實現
- 清晰度檢查：描述明確無歧義

## 💡 最佳實踐

### 撰寫原則
1. **具體明確**：避免模糊的描述
2. **可測試性**：每個步驟都可驗證
3. **獨立完整**：不依賴其他文件也能理解
4. **版本控制**：記錄每次修改

### 常見錯誤
- ❌ 混合多個用例在一個文件
- ❌ 技術實作細節過多
- ❌ 忽略錯誤處理流程
- ❌ 前後置條件不完整

### 優秀範例
- ✅ 清晰的步驟編號和描述
- ✅ 完整的錯誤處理流程
- ✅ 具體的資料範例
- ✅ 可執行的測試場景

---

**記住**：優秀的 Use Case 是開發團隊的共同語言，它連接業務需求和技術實作，確保所有人對功能有一致的理解。